"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6874],{26874:function(e,t,n){n.d(t,{VQ:function(){return w},We:function(){return j},jD:function(){return b}});var a=n(57437),r=n(10243),i=n(2265),c=n(63411),s=n.n(c),o=n(47907),d=n(19524),l=n.n(d),u=n(40874),f=n(605),m=n(43951),x=n(21471),p=n(54548),h=n(21350);let b={Share:"share",Equip:"equip",AddToAuction:"add-to-auction"};function w(e){var t;let{item:n,equippedCallback:r,onShowTotalDamage:i=!1,actions:c}=e,o=n.weapon;o.totalFlatDamage||(o.totalFlatDamage=o.damageOfPhysical+o.damageOfFire+o.damageOfCold+o.damageOfLightning);let d=async e=>{await (0,f.V3)(e._id),r&&r()},m=Object.keys(o.additionalAttributes||{}).length>0,w=async e=>{p.W.emit(h.so,{itemId:e._id})},j=async()=>{let{isConfirmed:e,value:t}=await s().fire({title:"판매 가격을 설정하세요",input:"number",html:"<div><div>".concat(n.weapon.name,"</div><div>판매 수수료는 10%입니다.</div><div>등록은 무료이며, 수수료는 판매되는 순간 정산됩니다.</div></div>"),inputAttributes:{autocapitalize:"off"},showCancelButton:!0,confirmButtonText:"등록하기",cancelButtonText:"취소",showLoaderOnConfirm:!0,preConfirm:async e=>{let t=parseInt(e,10);if(t<1)return s().showValidationMessage("최소 설정 금액 제한\n            ".concat(1..toLocaleString()));if(t>1e8)return s().showValidationMessage("최대 설정 금액 한도 초과\n            ".concat(1e8.toLocaleString()));try{return await (0,f.fY)(n._id,{gold:t})}catch(e){s().showValidationMessage("\n        Request failed: ".concat(e,"\n      "))}},allowOutsideClick:()=>!s().isLoading()});e&&(await s().fire({title:"등록되었습니다"}),r&&r())};return(0,a.jsxs)("div",{className:"flex flex-col min-w-[300px] text-white bg-[#555d62ed] rounded shadow-gray-400 shadow-xl border-2 ",style:{borderColor:(0,x.oK)(o.iGrade)},children:[(0,a.jsx)("div",{className:"flex items-center justify-center py-[6px]",children:Array(null==o?void 0:o.maxStarForce).fill(1).map((e,t)=>{let n=t<o.starForce;return(0,a.jsx)("img",{className:"w-[16px] h-[16px]",src:"/images/star_".concat(n?"on":"off",".png")},(0,u.Z)())})}),(0,a.jsx)("div",{className:"text-center text-2xl bg-[#9bb5c44f] ff-wavve",children:o.name}),(0,a.jsxs)("div",{className:"px-[10px] py-[2px] pt-[6px]",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("div",{className:"",children:"장비 분류"}),(0,a.jsx)("div",{children:(0,x.Iu)(o.weaponType)||"없음"})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("div",{className:"",children:"아이템 레벨"}),(0,a.jsx)("div",{children:o.iLevel})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("div",{className:"",children:"등급"}),(0,a.jsx)("div",{style:{color:(0,x.oK)(o.iGrade)},children:(0,x.Iu)(o.iGrade)||"없음"})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("div",{className:"",children:"착용 레벨"}),(0,a.jsx)("div",{children:o.requiredEquipmentLevel})]})]}),(0,a.jsx)("div",{className:"border-b border-b-gray-400 border-dotted"}),(0,a.jsxs)("div",{className:"px-[10px] pt-[2px] text-[14px]",children:[(0,a.jsxs)("div",{className:"mt-[6px]",children:["기본 속성(",null===(t=o.totalFlatDamage)||void 0===t?void 0:t.toLocaleString(),")"]}),(0,a.jsx)("div",{className:"border-b border-b-gray-400"})]}),(0,a.jsxs)("div",{className:"px-[10px]",children:[o.damageOfPhysical>0&&(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("div",{className:"",children:"물리 피해"}),(0,a.jsx)("div",{children:o.damageOfPhysical})]}),o.damageOfCold>0&&(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("div",{className:"",children:"냉기 피해"}),(0,a.jsx)("div",{children:o.damageOfCold})]}),o.damageOfFire>0&&(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("div",{className:"",children:"화염 피해"}),(0,a.jsx)("div",{children:o.damageOfFire})]}),o.damageOfLightning>0&&(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("div",{className:"",children:"번개 피해"}),(0,a.jsx)("div",{children:o.damageOfLightning})]}),o.criticalRate>0&&(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("div",{className:"",children:"치명타 확률"}),(0,a.jsx)("div",{children:o.criticalRate})]}),o.criticalMultiplier>0&&(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("div",{className:"",children:"치명타 배율"}),(0,a.jsx)("div",{children:o.criticalMultiplier})]})]}),m&&(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"border-b border-b-gray-400 border-dotted"}),(0,a.jsx)("div",{className:"px-[10px] mt-[6px] text-[#ffea00]",children:"추가 속성"})]}),m&&(0,a.jsxs)("div",{className:"px-[10px]",children:[(0,a.jsx)("div",{className:"border-b border-b-gray-400"}),l().sortBy(Object.keys(o.additionalAttributes||{}),e=>e).map(e=>{let t=o.additionalAttributes[e];return(0,a.jsx)("div",{children:(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("div",{children:(0,x.Iu)(e)}),(0,a.jsx)("div",{children:t})]})},(0,u.Z)())})]}),(0,a.jsx)("div",{className:"border-b border-b-gray-400 border-dotted"}),(0,a.jsx)("div",{className:"px-[10px] py-[2px]",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("div",{className:"",children:"판매가"}),(0,a.jsxs)("div",{className:"flex items-center gap-[2px]",children:[(0,a.jsx)("img",{src:"/images/icon_currency.png",className:"w-[24px]"}),(0,a.jsx)("div",{children:o.gold.toLocaleString()})]})]})}),(0,a.jsx)("div",{className:"border-b border-b-gray-400 border-dotted"}),(0,a.jsx)("div",{className:"px-[10px] py-[2px]",children:(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("div",{children:"획득일시"}),(0,a.jsx)("div",{children:(0,x.W)(n.createdAt)})]})}),(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{children:(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[c&&c.includes(b.Equip)&&(0,a.jsx)("div",{className:"flex items-center justify-center border border-white min-w-[40px] bg-green-400 rounded text-white px-[2px] cursor-pointer",onClick:()=>d(n),children:"착용"}),c&&c.includes(b.Share)&&(0,a.jsx)("div",{className:"flex items-center justify-center border border-white min-w-[40px] bg-green-400 rounded text-white px-[2px] cursor-pointer",onClick:()=>w(n),children:"공유"}),c&&c.includes(b.AddToAuction)&&(0,a.jsx)("div",{className:"flex items-center justify-center border border-white min-w-[40px] bg-green-400 rounded text-white px-[2px] cursor-pointer",onClick:()=>j(),children:"거래소 등록"})]})})})]},(0,u.Z)())}function j(e){let{className:t="",item:n,actions:i,onShowTotalDamage:c=!1,equippedItems:s,equippedCallback:o=()=>{},onSelect:d=()=>{}}=e,[l]=(s||[]).filter(e=>"weapon"===e.iType),u=n.weapon,f=((null==u?void 0:u.damageOfPhysical)||0)+((null==u?void 0:u.damageOfLightning)||0)+((null==u?void 0:u.damageOfCold)||0)+((null==u?void 0:u.damageOfFire)||0);return(0,a.jsx)(a.Fragment,{children:"weapon"===n.iType&&(0,a.jsx)("div",{className:"relative cursor-pointer min-w-[40px] w-[40px] h-[40px] max-w-[40px] max-h-[40px] ".concat(t),style:{borderColor:(0,x.oK)(u.iGrade),borderWidth:"1px",borderRadius:"2px"},onClick:()=>{d(n)},children:(0,a.jsx)(r.Tooltip,{className:"rounded-none bg-transparent",interactive:!0,content:(0,a.jsxs)("div",{className:"flex gap-[4px] items-start",children:[l&&(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-black",children:"착용중 아이템"}),(0,a.jsx)(w,{item:l,onShowTotalDamage:c,actions:i,equippedCallback:o})]}),(0,a.jsxs)("div",{children:[l&&(0,a.jsx)("div",{className:"text-black",children:"선택된 아이템"}),(0,a.jsx)(w,{item:n,onShowTotalDamage:c,actions:i,equippedCallback:o})]})]}),children:(0,a.jsxs)("div",{className:"relative max-w-full max-h-full w-[40px] h-[40px]",children:[(0,a.jsx)("div",{className:"absolute text-[12px] border rounded px-[2px] ff-ba ff-skew bg-[#424242a6] text-white",children:f}),(0,a.jsx)("img",{className:"max-w-full max-h-full w-[40px] h-[40px]",src:"".concat((0,m.Z)(null==u?void 0:u.thumbnail))})]})})})})}t.ZP=(0,i.forwardRef)(function(e,t){let{borderStyle:n,refreshInventory:c,refreshMe:s,equippedItems:d}=e,l=(0,o.useRouter)(),[m,x]=(0,i.useState)([]),[p,h]=(0,i.useState)(0),[w,v]=(0,i.useState)(),g=async()=>{c&&s&&await Promise.all([c(),s()])},y=async()=>{let{items:e,slots:t,isFulled:n}=await (0,f.iX)();x(e),h(t),v(n)},A=()=>{l.push("/main/inn")};return(0,i.useEffect)(()=>{y()},[]),(0,i.useImperativeHandle)(t,()=>({refresh:()=>{y()}})),(0,a.jsx)(r.Card,{className:"rounded w-[460px] max-w-[460px] min-w-[460px] flex justify-center items-center min-h-40 ".concat(n),children:(0,a.jsxs)(r.CardBody,{children:[(0,a.jsx)("div",{children:"인벤토리"}),w&&(0,a.jsxs)("div",{className:"text-red-400 text-[14px]",children:["* 인벤토리가 가득 찼습니다. 아이템을 더이상 획득할 수 없습니다."," ",(0,a.jsx)("span",{className:"underline text-[20px] cursor-pointer",onClick:()=>A(),children:"여관"}),"으로 이동해 아이템을 정리하세요"]}),(0,a.jsx)("div",{className:"flex flex-wrap gap-[1px]",children:Array(100).fill(1).map((e,t)=>{let n=m[t],r=t>=p;return(0,a.jsxs)("div",{className:"relative flex border-[1px] border-r rounded-md w-[40px] h-[40px] ".concat(r?"bg-gray-800":""),children:[r&&(0,a.jsx)("div",{className:"absolute z-10 bg-gray-800 bg-opacity-80 rounded"}),n&&(0,a.jsx)(j,{className:"p-[2px]",item:n,actions:[b.Share,b.Equip,b.AddToAuction],onShowTotalDamage:!0,equippedItems:d,equippedCallback:g},(0,u.Z)())]},(0,u.Z)())})})]})})})},38687:function(e,t,n){n.d(t,{LJ:function(){return r},oE:function(){return a}});let a="https://dooboo.online:3001",r="/images/question_mark.webp"},21350:function(e,t,n){n.d(t,{$L:function(){return r},C7:function(){return m},JJ:function(){return i},Ko:function(){return u},RS:function(){return s},SY:function(){return l},Vl:function(){return d},Wj:function(){return f},__:function(){return c},iy:function(){return a},so:function(){return o}});let a="chat-message",r="chat-message",i="chat-join",c="get-characters",s="get-characters",o="share-item",d="share-item",l="chat-emoji",u="chat-emoji",f="message",m={SYSTEM:"system",NORMAL:"normal",ITEM_SHARE:"item-share",EMOJI:"emoji"}},605:function(e,t,n){n.d(t,{ch:function(){return d},$b:function(){return I},PJ:function(){return A},mp:function(){return P},nw:function(){return C},in:function(){return w},AS:function(){return O},V3:function(){return M},Kd:function(){return Y},T7:function(){return v},Oz:function(){return j},wS:function(){return W},yJ:function(){return q},Gs:function(){return _},_t:function(){return E},YK:function(){return R},DJ:function(){return s},OY:function(){return p},sI:function(){return h},QN:function(){return b},ME:function(){return f},Bp:function(){return m},iX:function(){return D},VR:function(){return N},aM:function(){return o},fY:function(){return Z},Tp:function(){return g},DG:function(){return H},rJ:function(){return F},E:function(){return x},AJ:function(){return l},hv:function(){return B},je:function(){return y},O:function(){return L},RD:function(){return k},MC:function(){return u},gE:function(){return G},uw:function(){return T},ZR:function(){return S}});var a=n(7908),r=n(63411),i=n.n(r);let c=a.Z.create({baseURL:"https://dooboo.online:3001"});async function s(){let{data:e}=await c.get("/auth/jwt");return e}async function o(){let{data:e}=await c.get("/user/me");return e}async function d(e){let{data:t}=await c.get("/user/battle",{params:{name:e}});return t}async function l(e){let{data:t}=await c.post("/monster/create",e,{headers:{"Content-Type":"multipart/form-data"},transformRequest:[()=>e]});return t}async function u(e){let{data:t}=await c.put("/monster/update",e);return t}async function f(e){let{data:t}=await c.get("/monster/".concat(e));return t}async function m(){let{data:e}=await c.get("/monster/list");return e}async function x(e){let{data:t}=await c.post("/map/create",e);return t}async function p(e){let{data:t}=await c.get("/map/".concat(e));return t}async function h(){let{data:e}=await c.get("/map/list");return e}async function b(){let{data:e}=await c.get("/map/list-name");return e}async function w(e){let{data:t}=await c.delete("/map/delete",{data:{_id:e}});return t}async function j(){let{data:e}=await c.get("/item/base-weapon/list");return e}async function v(e){let{data:t}=await c.get("/item/base-weapon/".concat(e));return t}async function g(e){let{data:t}=await c.post("/item/base-weapon",e);return t}async function y(e){let{data:t}=await c.put("/item/base-weapon/".concat(e._id),e);return t}async function A(e){let{data:t}=await c.delete("/item/base-weapon/".concat(e));return t}async function N(){let{data:e}=await c.get("/character/rank");return e}async function D(){let{data:e}=await c.get("/character/inventory");return e}async function E(){let{data:e}=await c.get("/item/drop/list");return e}async function _(e){let{data:t}=await c.get("/item/drop/".concat(e));return t}async function k(e){let{data:t}=await c.put("/item/drop/".concat(e._id),e);return t}async function I(e){let{data:t}=await c.post("/item/drop",e);return t}async function C(e){let{data:t}=await c.delete("/item/drop/".concat(e));return t}async function S(e){let{data:t}=await c.post("/item/upload",{},{headers:{"Content-Type":"multipart/form-data"},transformRequest:[()=>e]});return t}async function M(e){let{data:t}=await c.post("/item/equip/".concat(e));return t}async function T(e){let{data:t}=await c.post("/item/unequip/".concat(e));return t}async function G(e){let{data:t}=await c.post("/item/sell",{itemIds:e});return t}async function R(e){let{data:t}=await c.get("/item/enhance-price/".concat(e));return t}async function O(e,t){let{data:n}=await c.post("/item/enhance/".concat(e),t);return n}async function H(e){let{data:t}=await c.post("/board/create",e);return t}async function L(e,t){let{data:n}=await c.put("/board/edit/".concat(e),t);return n}async function W(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{page:1},{data:n}=await c.post("/board/list",{condition:e,opts:t});return n}async function q(e){let{data:t}=await c.post("/board/".concat(e));return t}async function F(e,t){let{data:n}=await c.post("/board/comment/create/".concat(e),t);return n}async function P(e){let{data:t}=await c.delete("/board/delete/".concat(e));return t}async function Z(e,t){let{data:n}=await c.post("/item/auction/add/".concat(e),t);return n}async function Y(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,{data:n}=await c.post("/item/auction/list",{condition:e,opts:t});return n}async function B(e){let{data:t}=await c.post("/item/auction/purchase/".concat(e));return t}c.interceptors.request.use(e=>{let t=localStorage.getItem("token");return e.headers.Authorization=t,e},e=>Promise.reject(e)),c.interceptors.response.use(e=>e,async e=>{let{code:t,message:n,response:a}=e,{status:r,data:c}=a||{};return await i().fire({title:t,text:(null==c?void 0:c.message)||n,icon:"error",confirmButtonText:"확인"}),Promise.reject(e)})},43951:function(e,t,n){n.d(t,{Z:function(){return r}});var a=n(38687);function r(e){return!e||e.includes(a.oE)?e:"".concat(a.oE,"/").concat(e)}},40874:function(e,t,n){n.d(t,{Z:function(){return r}});var a=n(41231);function r(){return(0,a.Z)()}},54548:function(e,t,n){n.d(t,{W:function(){return i}});var a=n(6373);let r=n(38687).oE,i=(0,a.io)(r,{autoConnect:!1,extraHeaders:{Authorizaiton:""}})},21471:function(e,t,n){n.d(t,{Ap:function(){return l},F6:function(){return o},Iu:function(){return f},KR:function(){return s},W:function(){return d},dW:function(){return x},oK:function(){return m},qo:function(){return c},r5:function(){return u},v9:function(){return p}});var a=n(42151),r=n.n(a);n(30971);var i=n(84555);let c=e=>{let[t,n]=e;return"".concat(t," ~ ").concat(n)},s=e=>r()(e).format("YYYY-MM-DD HH:mm:ss"),o=e=>r()(e).fromNow(),d=e=>r()(e).format("MM/DD HH:mm:ss"),l=e=>r()(e).format("HH:mm"),u=e=>{if("weapon"===e.iType)return e.weapon;throw Error("Unknown Item Type")},f=e=>{let t=e;switch(e){case"axe":t="도끼";break;case"sword":t="검";break;case"dagger":t="단검";break;case"bow":t="활";break;case"blunt":t="둔기";break;case"spear":t="창";break;case"normal":t="일반";break;case"magic":t="마법";break;case"rare":t="희귀";break;case"epic":t="서사";break;case"INCREASED_DAMAGE":t="피해 증가(%)";break;case"INCREASED_PHYSICAL_DAMAGE":t="물리 피해 증가(%)";break;case"INCREASED_COLD_DAMAGE":t="냉기 피해 증가(%)";break;case"INCREASED_FIRE_DAMAGE":t="화염 피해 증가(%)";break;case"INCREASED_LIGHTNING_DAMAGE":t="번개 피해 증가(%)";break;case"ADDED_PHYSICAL_DAMAGE":t="물리 피해 추가(+)";break;case"ADDED_COLD_DAMAGE":t="냉기 피해 추가(+)";break;case"ADDED_FIRE_DAMAGE":t="화염 피해 추가(+)";break;case"ADDED_LIGHTNING_DAMAGE":t="번개 피해 추가(+)";break;case"ADDED_DAMAGE_WITH_AXE":t="도끼 피해 추가(+)";break;case"ADDED_DAMAGE_WITH_SWORD":t="검 피해 추가(+)";break;case"ADDED_DAMAGE_WITH_DAGGER":t="단검 피해 추가(+)";break;case"ADDED_DAMAGE_WITH_BOW":t="활 피해 추가(+)";break;case"ADDED_DAMAGE_WITH_BLUNT":t="둔기 피해 추가(+)";break;case"ADDED_DAMAGE_WITH_SPEAR":t="창 피해 추가(+)";break;case"INCREASED_DAMAGE_WITH_AXE":t="도끼 피해 증가(%)";break;case"INCREASED_DAMAGE_WITH_SWORD":t="검 피해 증가(%)";break;case"INCREASED_DAMAGE_WITH_DAGGER":t="단검 피해 증가(%)";break;case"INCREASED_DAMAGE_WITH_BOW":t="활 피해 증가(%)";break;case"INCREASED_DAMAGE_WITH_BLUNT":t="둔기 피해 증가(%)";break;case"INCREASED_DAMAGE_WITH_SPEAR":t="창 피해 증가(%)"}return t},m=e=>{let t="#fff";switch(e){case"normal":t="#ece0e0";break;case"magic":t="#0082ff";break;case"rare":t="#fdd125";break;case"epic":t="#6000d2"}return t},x=e=>(0,i.ZP)(e);function p(e,t){let n=e.split(","),a=n[0].match(/:(.*?);/)[1],r=atob(n[1]),i=r.length,c=new Uint8Array(i);for(;i--;)c[i]=r.charCodeAt(i);return new File([c],t,{type:a})}}}]);