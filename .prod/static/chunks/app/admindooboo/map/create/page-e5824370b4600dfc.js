(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9571],{37459:function(t,n,e){Promise.resolve().then(e.bind(e,71084))},71084:function(t,n,e){"use strict";e.r(n),e.d(n,{default:function(){return f}});var a=e(57437),r=e(10243),i=e(2265),o=e(82670),c=e(63411),u=e.n(c),s=e(47907),l=e(605),d=e(43951);function f(){let{register:t,handleSubmit:n,formState:{errors:e},watch:c,control:f}=(0,o.cI)({defaultValues:{name:""}}),m=(0,s.useRouter)(),[p,w]=(0,i.useState)([]),[h,y]=(0,i.useState)([]),x=t=>{var n;let e="";return(null==t?void 0:null===(n=t.name)||void 0===n?void 0:n.length)<2&&(e="맵 제목은 최소 2자이상 입력하세요"),e},b=async t=>{let n=x(t);if(n){await u().fire({title:n,text:n,icon:"error",confirmButtonText:"확인"});return}let e={...t,monsterIds:[...h.map(t=>t._id)]},{map:a}=await (0,l.E)(e);await u().fire({title:"등록되었습니다",text:n,icon:"success",confirmButtonText:"확인"}),m.push("/admindooboo/map")},g=async()=>{let{monsters:t}=await (0,l.Bp)();w(t)},v=t=>{let n=h.map(t=>t._id).indexOf(t._id);n<0||(h.splice(n,1),y([...h]))},j=t=>{h.map(t=>t._id).includes(t._id)||y([...h,t])};return(0,i.useEffect)(()=>{g()},[]),(0,a.jsx)("div",{className:"flex",children:(0,a.jsx)(r.Card,{className:"overflow-hidden",children:(0,a.jsx)(r.CardBody,{children:(0,a.jsxs)("form",{onSubmit:n(b),children:[(0,a.jsx)("div",{className:"items-center",children:(0,a.jsx)(o.Qr,{name:"name",control:f,render:t=>{let{field:n}=t;return(0,a.jsx)(r.Input,{label:"맵이름",...n})}})}),(0,a.jsxs)("div",{className:"flex gap-1 mt-2",children:[(0,a.jsx)("div",{children:"등장 몬스터"}),h.map(t=>(0,a.jsx)("div",{className:"cursor-pointer",onClick:()=>v(t),children:(0,a.jsxs)("div",{className:"relative grid select-none items-center whitespace-nowrap rounded-lg bg-gray-900 py-1.5 px-3 font-sans text-xs font-bold uppercase text-white",children:[(0,a.jsx)("span",{className:"mr-5 text-[14px]",children:t.name}),(0,a.jsx)("button",{className:"!absolute top-2/4 right-1 mx-px h-5 max-h-[32px] w-5 max-w-[32px] -translate-y-2/4 select-none rounded-md text-center align-middle font-sans text-xs font-medium uppercase text-white transition-all hover:bg-white/10 active:bg-white/30 disabled:pointer-events-none disabled:opacity-50 disabled:shadow-none",type:"button",children:(0,a.jsx)("span",{className:"absolute transform -translate-x-1/2 -translate-y-1/2 top-1/2 left-1/2",children:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"w-4 h-4",strokeWidth:"2",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})})]})},t._id))]}),(0,a.jsx)("div",{className:"flex flex-wrap border border-solid border-blue-gray-200 rounded mt-1",children:p&&p.map(t=>(0,a.jsxs)("div",{className:"p-1 relative cursor-pointer min-w-20 min-h-20 max-w-32 border border-solid hover:font-bold hover:bg-gray-100",onClick:()=>j(t),children:[(0,a.jsx)("img",{className:"",src:(0,d.Z)(t.thumbnail)}),(0,a.jsx)("div",{className:"relative flex items-center justify-center",children:t.name})]},t._id))}),(0,a.jsx)("div",{className:"flex justify-center mt-5",children:(0,a.jsx)(r.Button,{className:"w-full",size:"md",color:"blue",onClick:n(b),children:"생성"})})]})})})})}},38687:function(t,n,e){"use strict";e.d(n,{LJ:function(){return r},oE:function(){return a}});let a="https://dooboo.online:3001",r="/images/question_mark.webp"},605:function(t,n,e){"use strict";e.d(n,{ch:function(){return s},$b:function(){return R},PJ:function(){return N},mp:function(){return D},nw:function(){return S},in:function(){return x},AS:function(){return L},V3:function(){return q},Kd:function(){return Y},T7:function(){return g},Oz:function(){return b},wS:function(){return Z},yJ:function(){return z},Gs:function(){return E},_t:function(){return C},YK:function(){return I},DJ:function(){return c},OY:function(){return w},sI:function(){return h},QN:function(){return y},ME:function(){return f},Bp:function(){return m},iX:function(){return k},VR:function(){return _},aM:function(){return u},fY:function(){return V},Tp:function(){return v},DG:function(){return M},rJ:function(){return A},E:function(){return p},AJ:function(){return l},hv:function(){return G},je:function(){return j},O:function(){return P},RD:function(){return B},MC:function(){return d},gE:function(){return O},uw:function(){return J},ZR:function(){return T}});var a=e(7908),r=e(63411),i=e.n(r);let o=a.Z.create({baseURL:"https://dooboo.online:3001"});async function c(){let{data:t}=await o.get("/auth/jwt");return t}async function u(){let{data:t}=await o.get("/user/me");return t}async function s(t){let{data:n}=await o.get("/user/battle",{params:{name:t}});return n}async function l(t){let{data:n}=await o.post("/monster/create",t,{headers:{"Content-Type":"multipart/form-data"},transformRequest:[()=>t]});return n}async function d(t){let{data:n}=await o.put("/monster/update",t);return n}async function f(t){let{data:n}=await o.get("/monster/".concat(t));return n}async function m(){let{data:t}=await o.get("/monster/list");return t}async function p(t){let{data:n}=await o.post("/map/create",t);return n}async function w(t){let{data:n}=await o.get("/map/".concat(t));return n}async function h(){let{data:t}=await o.get("/map/list");return t}async function y(){let{data:t}=await o.get("/map/list-name");return t}async function x(t){let{data:n}=await o.delete("/map/delete",{data:{_id:t}});return n}async function b(){let{data:t}=await o.get("/item/base-weapon/list");return t}async function g(t){let{data:n}=await o.get("/item/base-weapon/".concat(t));return n}async function v(t){let{data:n}=await o.post("/item/base-weapon",t);return n}async function j(t){let{data:n}=await o.put("/item/base-weapon/".concat(t._id),t);return n}async function N(t){let{data:n}=await o.delete("/item/base-weapon/".concat(t));return n}async function _(){let{data:t}=await o.get("/character/rank");return t}async function k(){let{data:t}=await o.get("/character/inventory");return t}async function C(){let{data:t}=await o.get("/item/drop/list");return t}async function E(t){let{data:n}=await o.get("/item/drop/".concat(t));return n}async function B(t){let{data:n}=await o.put("/item/drop/".concat(t._id),t);return n}async function R(t){let{data:n}=await o.post("/item/drop",t);return n}async function S(t){let{data:n}=await o.delete("/item/drop/".concat(t));return n}async function T(t){let{data:n}=await o.post("/item/upload",{},{headers:{"Content-Type":"multipart/form-data"},transformRequest:[()=>t]});return n}async function q(t){let{data:n}=await o.post("/item/equip/".concat(t));return n}async function J(t){let{data:n}=await o.post("/item/unequip/".concat(t));return n}async function O(t){let{data:n}=await o.post("/item/sell",{itemIds:t});return n}async function I(t){let{data:n}=await o.get("/item/enhance-price/".concat(t));return n}async function L(t,n){let{data:e}=await o.post("/item/enhance/".concat(t),n);return e}async function M(t){let{data:n}=await o.post("/board/create",t);return n}async function P(t,n){let{data:e}=await o.put("/board/edit/".concat(t),n);return e}async function Z(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{page:1},{data:e}=await o.post("/board/list",{condition:t,opts:n});return e}async function z(t){let{data:n}=await o.post("/board/".concat(t));return n}async function A(t,n){let{data:e}=await o.post("/board/comment/create/".concat(t),n);return e}async function D(t){let{data:n}=await o.delete("/board/delete/".concat(t));return n}async function V(t,n){let{data:e}=await o.post("/item/auction/add/".concat(t),n);return e}async function Y(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,{data:e}=await o.post("/item/auction/list",{condition:t,opts:n});return e}async function G(t){let{data:n}=await o.post("/item/auction/purchase/".concat(t));return n}o.interceptors.request.use(t=>{let n=localStorage.getItem("token");return t.headers.Authorization=n,t},t=>Promise.reject(t)),o.interceptors.response.use(t=>t,async t=>{let{code:n,message:e,response:a}=t,{status:r,data:o}=a||{};return await i().fire({title:n,text:(null==o?void 0:o.message)||e,icon:"error",confirmButtonText:"확인"}),Promise.reject(t)})},43951:function(t,n,e){"use strict";e.d(n,{Z:function(){return r}});var a=e(38687);function r(t){return!t||t.includes(a.oE)?t:"".concat(a.oE,"/").concat(t)}}},function(t){t.O(0,[6384,9461,8694,7908,884,2971,8069,1744],function(){return t(t.s=37459)}),_N_E=t.O()}]);