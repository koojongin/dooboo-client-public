(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[522],{84512:function(e,a,t){Promise.resolve().then(t.bind(t,33141))},33141:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return p}});var n=t(57437),r=t(63411),i=t.n(r),c=t(2265),l=t(82670),s=t(10243),o=t(47907),u=t(605);let d={Axe:"axe",Sword:"sword",Dagger:"dagger",Bow:"bow",Blunt:"blunt",Spear:"spear"};var f=t(40874),m=t(43951),x=t(21471);function p(e){let{params:a,searchParams:t}=e,r=(0,o.useRouter)(),p=(0,c.useRef)(null),g=(null==a?void 0:a.weaponId)==="create",[h,M]=(0,c.useState)(),j=Object.values(d),{handleSubmit:b,formState:{errors:v},control:w,setValue:y,getValues:O}=(0,l.cI)({defaultValues:{name:"",damageOfPhysicalMin:0,damageOfPhysicalMax:0,damageOfFireMin:0,damageOfFireMax:0,damageOfColdMin:0,damageOfColdMax:0,damageOfLightningMin:0,damageOfLightningMax:0,criticalMultiplierMin:0,criticalMultiplierMax:0,criticalRateMin:0,criticalRateMax:0,gold:0,maxStarForce:5,iLevel:1,weaponType:"axe"}}),A=()=>{p.current.click()},D=async e=>{let a=e.target.files[0],t=new FormData;t.append("file",a);let{path:n}=await (0,u.ZR)(t);M({...h,thumbnail:n})},E=(0,c.useCallback)(async e=>{let{weapon:a}=await (0,u.T7)(e);if(!a)return i().fire({title:"아이템을 찾을 수 없습니다.",text:"문제가 계속되면 관리자에게 문의해주세요",icon:"error",confirmButtonText:"확인"});M(a),y("name",a.name),y("damageOfPhysicalMin",a.damageOfPhysical[0]),y("damageOfPhysicalMax",a.damageOfPhysical[1]),y("damageOfFireMin",a.damageOfFire[0]),y("damageOfFireMax",a.damageOfFire[1]),y("damageOfColdMin",a.damageOfCold[0]),y("damageOfColdMax",a.damageOfCold[1]),y("damageOfLightningMin",a.damageOfLightning[0]),y("damageOfLightningMax",a.damageOfLightning[1]),y("criticalRateMin",a.criticalRate[0]),y("criticalRateMax",a.criticalRate[1]),y("criticalMultiplierMin",a.criticalMultiplier[0]),y("criticalMultiplierMax",a.criticalMultiplier[1]),y("gold",a.gold),y("iLevel",a.iLevel),y("maxStarForce",a.maxStarForce),y("weaponType",a.weaponType)},[y]),_=e=>{let a={message:"",invalid:!1};return e.name||(a.invalid=!0,a.message="아이템 명이 없습니다."),h.thumbnail||(a.invalid=!0,a.message="아이템 이미지가 없습니다."),e.damageOfPhysicalMin>e.damageOfPhysicalMax&&(a.invalid=!0,a.message="물리 피해 최소는 최대보다 클 수 없음"),e.damageOfFireMin>e.damageOfFireMax&&(a.invalid=!0,a.message="화염 피해 최소는 최대보다 클 수 없음"),e.damageOfColdMin>e.damageOfColdMax&&(a.invalid=!0,a.message="냉기 피해 최소는 최대보다 클 수 없음"),e.damageOfLightningMin>e.damageOfLightningMax&&(a.invalid=!0,a.message="번개 피해 최소는 최대보다 클 수 없음"),e.criticalRateMin>e.criticalRateMax&&(a.invalid=!0,a.message="치명타 확률 최소는 최대보다 클 수 없음"),e.criticalMultiplierMin>e.criticalMultiplierMax&&(a.invalid=!0,a.message="치명타 배율 최소는 최대보다 클 수 없음"),a},I=()=>{y("damageOfPhysicalMin",parseFloat("".concat(O("damageOfPhysicalMin")))),y("damageOfPhysicalMax",parseFloat("".concat(O("damageOfPhysicalMax")))),y("damageOfFireMin",parseFloat("".concat(O("damageOfFireMin")))),y("damageOfFireMax",parseFloat("".concat(O("damageOfFireMax")))),y("damageOfColdMin",parseFloat("".concat(O("damageOfColdMin")))),y("damageOfColdMax",parseFloat("".concat(O("damageOfColdMax")))),y("damageOfLightningMin",parseFloat("".concat(O("damageOfLightningMin")))),y("damageOfLightningMax",parseFloat("".concat(O("damageOfLightningMax")))),y("criticalRateMin",parseFloat("".concat(O("criticalRateMin")))),y("criticalRateMax",parseFloat("".concat(O("criticalRateMax")))),y("criticalMultiplierMin",parseFloat("".concat(O("criticalMultiplierMin")))),y("criticalMultiplierMax",parseFloat("".concat(O("criticalMultiplierMax"))))},k=async()=>{I();let{message:e,invalid:a}=_(O());if(a){i().fire({title:"실패",text:e||"알 수 없는 에러",icon:"error",confirmButtonText:"닫기"});return}let t={...h,gold:O("gold"),name:O("name"),iLevel:O("iLevel"),maxStarForce:O("maxStarForce"),weaponType:O("weaponType"),damageOfPhysical:[O("damageOfPhysicalMin"),O("damageOfPhysicalMax")],damageOfCold:[O("damageOfColdMin"),O("damageOfColdMax")],damageOfFire:[O("damageOfFireMin"),O("damageOfFireMax")],damageOfLightning:[O("damageOfLightningMin"),O("damageOfLightningMax")],criticalRate:[O("criticalRateMin"),O("criticalRateMax")],criticalMultiplier:[O("criticalMultiplierMin"),O("criticalMultiplierMax")]};M(t),g?await (0,u.Tp)(t):await (0,u.je)(t),await i().fire({title:"성공",text:"아이템이 ".concat(g?"생성":"수정"," 되었습니다."),icon:"success",confirmButtonText:"닫기"}),r.push("/admindooboo/item/weapon")},C=e=>{switch(typeof e){case"string":break;case"object":if(Array.isArray(e))return e.join("~")}return e};return(0,c.useEffect)(()=>{if(!(null==a?void 0:a.weaponId))return i().fire({title:"잘못된 접근입니다.",text:"아이템 아이디를 확인할 수 없습니다.",icon:"error",confirmButtonText:"확인"});g||E(a.weaponId)},[g,E,a.weaponId]),(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{children:["아이템 ",g?"생성":"수정"," 페이지"]}),(0,n.jsxs)("div",{className:"flex gap-5",children:[(0,n.jsx)(s.Card,{className:"overflow-auto",children:(0,n.jsxs)(s.CardBody,{children:[(0,n.jsx)(s.Chip,{variant:"outlined",size:"lg",value:"".concat(g?"아이템 옵션":"수정 옵션"),className:"mb-5 text-[16px] pt-2.5"}),(0,n.jsxs)("form",{onSubmit:b(k),children:[(0,n.jsxs)("div",{className:"[&>*]:flex [&>*]:items-center [&>*]:gap-1 [&>*>:first-child]:min-w-[150px] flex flex-col gap-2",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{children:"아이템 명"}),(0,n.jsx)("div",{children:(0,n.jsx)(l.Qr,{name:"name",control:w,render:e=>{let{field:a}=e;return(0,n.jsx)(s.Input,{label:"이름",...a,value:a.value})}})})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{children:"이미지"}),(0,n.jsx)("input",{onChange:D,ref:p,type:"file",placeholder:"name@mail.com",className:"hidden absolute"}),(null==h?void 0:h.thumbnail)&&(0,n.jsxs)("div",{children:[(0,n.jsx)("img",{src:(0,m.Z)(h.thumbnail),className:"w-[60px] h-[60px] border-dark-blue border"}),(0,n.jsx)("div",{className:"ff-ba ff-skew cursor-pointer bg-green-500 px-[5px] rounded flex items-center text-[16px] text-white",onClick:()=>A(),children:"이미지 변경"})]}),!(null==h?void 0:h.thumbnail)&&(0,n.jsx)("div",{className:"ff-ba ff-skew cursor-pointer bg-green-500 px-[5px] rounded flex items-center text-[16px] text-white",onClick:()=>A(),children:"이미지 업로드"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{children:"+물리 피해"}),(0,n.jsxs)("div",{className:"flex",children:[(0,n.jsx)(l.Qr,{name:"damageOfPhysicalMin",control:w,render:e=>{let{field:a}=e;return(0,n.jsx)(s.Input,{label:"물리 피해 최소",...a,type:"number"})}}),(0,n.jsx)("div",{children:"~"}),(0,n.jsx)(l.Qr,{name:"damageOfPhysicalMax",control:w,render:e=>{let{field:a}=e;return(0,n.jsx)(s.Input,{type:"number",label:"물리 피해 최대",...a})}})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{children:"+화염 피해"}),(0,n.jsxs)("div",{className:"flex",children:[(0,n.jsx)(l.Qr,{name:"damageOfFireMin",control:w,render:e=>{let{field:a}=e;return(0,n.jsx)(s.Input,{type:"number",label:"화염 피해 최소",...a})}}),(0,n.jsx)("div",{children:"~"}),(0,n.jsx)(l.Qr,{name:"damageOfFireMax",control:w,render:e=>{let{field:a}=e;return(0,n.jsx)(s.Input,{type:"number",label:"화염 피해 최대",...a})}})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{children:"+냉기 피해"}),(0,n.jsxs)("div",{className:"flex",children:[(0,n.jsx)(l.Qr,{name:"damageOfColdMin",control:w,render:e=>{let{field:a}=e;return(0,n.jsx)(s.Input,{type:"number",label:"냉기 피해 최소",...a})}}),(0,n.jsx)("div",{children:"~"}),(0,n.jsx)(l.Qr,{name:"damageOfColdMax",control:w,render:e=>{let{field:a}=e;return(0,n.jsx)(s.Input,{type:"number",label:"냉기 피해 최대",...a})}})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{children:"+번개 피해"}),(0,n.jsxs)("div",{className:"flex",children:[(0,n.jsx)(l.Qr,{name:"damageOfLightningMin",control:w,render:e=>{let{field:a}=e;return(0,n.jsx)(s.Input,{label:"번개 피해 최소",...a})}}),(0,n.jsx)("div",{children:"~"}),(0,n.jsx)(l.Qr,{name:"damageOfLightningMax",control:w,render:e=>{let{field:a}=e;return(0,n.jsx)(s.Input,{label:"번개 피해 최대",...a})}})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{children:"추가 치명타 확률"}),(0,n.jsxs)("div",{className:"flex",children:[(0,n.jsx)(l.Qr,{name:"criticalRateMin",control:w,render:e=>{let{field:a}=e;return(0,n.jsx)(s.Input,{label:"치명타 확률 최소",...a})}}),(0,n.jsx)("div",{children:"~"}),(0,n.jsx)(l.Qr,{name:"criticalRateMax",control:w,render:e=>{let{field:a}=e;return(0,n.jsx)(s.Input,{label:"치명타 확률 최대",...a})}})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{children:"추가 치명타 배율"}),(0,n.jsxs)("div",{className:"flex",children:[(0,n.jsx)(l.Qr,{name:"criticalMultiplierMin",control:w,render:e=>{let{field:a}=e;return(0,n.jsx)(s.Input,{label:"치명타 배율 최소",...a})}}),(0,n.jsx)("div",{children:"~"}),(0,n.jsx)(l.Qr,{name:"criticalMultiplierMax",control:w,render:e=>{let{field:a}=e;return(0,n.jsx)(s.Input,{label:"치명타 배율 최대",...a})}})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{children:"판매가"}),(0,n.jsx)("div",{className:"flex",children:(0,n.jsx)(l.Qr,{name:"gold",control:w,render:e=>{let{field:a}=e;return(0,n.jsx)(s.Input,{label:"gold",...a})}})})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{children:"아이템 레벨"}),(0,n.jsx)("div",{className:"flex",children:(0,n.jsx)(l.Qr,{name:"iLevel",control:w,render:e=>{let{field:a}=e;return(0,n.jsx)(s.Input,{label:"iLevel",...a})}})})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{children:"최대 강화"}),(0,n.jsx)("div",{className:"flex",children:(0,n.jsx)(l.Qr,{name:"maxStarForce",control:w,render:e=>{let{field:a}=e;return(0,n.jsx)(s.Input,{label:"maxStarForce",...a})}})})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{children:"종류"}),(0,n.jsx)("div",{className:"flex",children:(0,n.jsx)(l.Qr,{name:"weaponType",control:w,render:e=>{let{field:a}=e;return(0,n.jsx)("select",{defaultValue:"axe",...a,children:j.map(e=>(0,n.jsx)("option",{value:e,children:(0,x.Iu)(e)},(0,f.Z)()))})}})})]})]}),(0,n.jsx)("div",{className:"flex justify-center mt-5",children:(0,n.jsx)(s.Button,{className:"w-full",size:"md",color:"blue",onClick:b(k),children:g?"생성":"수정"})})]})]})}),!g&&(0,n.jsx)(s.Card,{children:(0,n.jsxs)(s.CardBody,{children:[(0,n.jsx)(s.Chip,{variant:"outlined",size:"lg",value:"원본 옵션",className:"mb-5 text-[16px] pt-2.5"}),(0,n.jsx)("div",{children:h&&Object.entries(h).map(e=>{let[a,t]=e;return(0,n.jsxs)("div",{className:"flex gap-1",children:[(0,n.jsx)("div",{className:"min-w-[250px]",children:a}),(0,n.jsx)("div",{children:C(t)})]},(0,f.Z)())})})]})})]})]})}},38687:function(e,a,t){"use strict";t.d(a,{LJ:function(){return r},oE:function(){return n}});let n="https://dooboo.online:3001",r="/images/question_mark.webp"},605:function(e,a,t){"use strict";t.d(a,{ch:function(){return o},$b:function(){return I},PJ:function(){return y},mp:function(){return W},nw:function(){return k},in:function(){return M},AS:function(){return L},V3:function(){return R},Kd:function(){return Z},T7:function(){return b},Oz:function(){return j},wS:function(){return P},yJ:function(){return H},Gs:function(){return E},_t:function(){return D},YK:function(){return T},DJ:function(){return l},OY:function(){return p},sI:function(){return g},QN:function(){return h},ME:function(){return f},Bp:function(){return m},iX:function(){return A},VR:function(){return O},aM:function(){return s},fY:function(){return B},Tp:function(){return v},DG:function(){return S},rJ:function(){return Q},E:function(){return x},AJ:function(){return u},hv:function(){return Y},je:function(){return w},O:function(){return G},RD:function(){return _},MC:function(){return d},gE:function(){return F},uw:function(){return N},ZR:function(){return C}});var n=t(7908),r=t(63411),i=t.n(r);let c=n.Z.create({baseURL:"https://dooboo.online:3001"});async function l(){let{data:e}=await c.get("/auth/jwt");return e}async function s(){let{data:e}=await c.get("/user/me");return e}async function o(e){let{data:a}=await c.get("/user/battle",{params:{name:e}});return a}async function u(e){let{data:a}=await c.post("/monster/create",e,{headers:{"Content-Type":"multipart/form-data"},transformRequest:[()=>e]});return a}async function d(e){let{data:a}=await c.put("/monster/update",e);return a}async function f(e){let{data:a}=await c.get("/monster/".concat(e));return a}async function m(){let{data:e}=await c.get("/monster/list");return e}async function x(e){let{data:a}=await c.post("/map/create",e);return a}async function p(e){let{data:a}=await c.get("/map/".concat(e));return a}async function g(){let{data:e}=await c.get("/map/list");return e}async function h(){let{data:e}=await c.get("/map/list-name");return e}async function M(e){let{data:a}=await c.delete("/map/delete",{data:{_id:e}});return a}async function j(){let{data:e}=await c.get("/item/base-weapon/list");return e}async function b(e){let{data:a}=await c.get("/item/base-weapon/".concat(e));return a}async function v(e){let{data:a}=await c.post("/item/base-weapon",e);return a}async function w(e){let{data:a}=await c.put("/item/base-weapon/".concat(e._id),e);return a}async function y(e){let{data:a}=await c.delete("/item/base-weapon/".concat(e));return a}async function O(){let{data:e}=await c.get("/character/rank");return e}async function A(){let{data:e}=await c.get("/character/inventory");return e}async function D(){let{data:e}=await c.get("/item/drop/list");return e}async function E(e){let{data:a}=await c.get("/item/drop/".concat(e));return a}async function _(e){let{data:a}=await c.put("/item/drop/".concat(e._id),e);return a}async function I(e){let{data:a}=await c.post("/item/drop",e);return a}async function k(e){let{data:a}=await c.delete("/item/drop/".concat(e));return a}async function C(e){let{data:a}=await c.post("/item/upload",{},{headers:{"Content-Type":"multipart/form-data"},transformRequest:[()=>e]});return a}async function R(e){let{data:a}=await c.post("/item/equip/".concat(e));return a}async function N(e){let{data:a}=await c.post("/item/unequip/".concat(e));return a}async function F(e){let{data:a}=await c.post("/item/sell",{itemIds:e});return a}async function T(e){let{data:a}=await c.get("/item/enhance-price/".concat(e));return a}async function L(e,a){let{data:t}=await c.post("/item/enhance/".concat(e),a);return t}async function S(e){let{data:a}=await c.post("/board/create",e);return a}async function G(e,a){let{data:t}=await c.put("/board/edit/".concat(e),a);return t}async function P(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{page:1},{data:t}=await c.post("/board/list",{condition:e,opts:a});return t}async function H(e){let{data:a}=await c.post("/board/".concat(e));return a}async function Q(e,a){let{data:t}=await c.post("/board/comment/create/".concat(e),a);return t}async function W(e){let{data:a}=await c.delete("/board/delete/".concat(e));return a}async function B(e,a){let{data:t}=await c.post("/item/auction/add/".concat(e),a);return t}async function Z(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0,{data:t}=await c.post("/item/auction/list",{condition:e,opts:a});return t}async function Y(e){let{data:a}=await c.post("/item/auction/purchase/".concat(e));return a}c.interceptors.request.use(e=>{let a=localStorage.getItem("token");return e.headers.Authorization=a,e},e=>Promise.reject(e)),c.interceptors.response.use(e=>e,async e=>{let{code:a,message:t,response:n}=e,{status:r,data:c}=n||{};return await i().fire({title:a,text:(null==c?void 0:c.message)||t,icon:"error",confirmButtonText:"확인"}),Promise.reject(e)})},43951:function(e,a,t){"use strict";t.d(a,{Z:function(){return r}});var n=t(38687);function r(e){return!e||e.includes(n.oE)?e:"".concat(n.oE,"/").concat(e)}},40874:function(e,a,t){"use strict";t.d(a,{Z:function(){return r}});var n=t(41231);function r(){return(0,n.Z)()}},21471:function(e,a,t){"use strict";t.d(a,{Ap:function(){return u},F6:function(){return s},Iu:function(){return f},KR:function(){return l},W:function(){return o},dW:function(){return x},oK:function(){return m},qo:function(){return c},r5:function(){return d},v9:function(){return p}});var n=t(42151),r=t.n(n);t(30971);var i=t(84555);let c=e=>{let[a,t]=e;return"".concat(a," ~ ").concat(t)},l=e=>r()(e).format("YYYY-MM-DD HH:mm:ss"),s=e=>r()(e).fromNow(),o=e=>r()(e).format("MM/DD HH:mm:ss"),u=e=>r()(e).format("HH:mm"),d=e=>{if("weapon"===e.iType)return e.weapon;throw Error("Unknown Item Type")},f=e=>{let a=e;switch(e){case"axe":a="도끼";break;case"sword":a="검";break;case"dagger":a="단검";break;case"bow":a="활";break;case"blunt":a="둔기";break;case"spear":a="창";break;case"normal":a="일반";break;case"magic":a="마법";break;case"rare":a="희귀";break;case"epic":a="서사";break;case"INCREASED_DAMAGE":a="피해 증가(%)";break;case"INCREASED_PHYSICAL_DAMAGE":a="물리 피해 증가(%)";break;case"INCREASED_COLD_DAMAGE":a="냉기 피해 증가(%)";break;case"INCREASED_FIRE_DAMAGE":a="화염 피해 증가(%)";break;case"INCREASED_LIGHTNING_DAMAGE":a="번개 피해 증가(%)";break;case"ADDED_PHYSICAL_DAMAGE":a="물리 피해 추가(+)";break;case"ADDED_COLD_DAMAGE":a="냉기 피해 추가(+)";break;case"ADDED_FIRE_DAMAGE":a="화염 피해 추가(+)";break;case"ADDED_LIGHTNING_DAMAGE":a="번개 피해 추가(+)";break;case"ADDED_DAMAGE_WITH_AXE":a="도끼 피해 추가(+)";break;case"ADDED_DAMAGE_WITH_SWORD":a="검 피해 추가(+)";break;case"ADDED_DAMAGE_WITH_DAGGER":a="단검 피해 추가(+)";break;case"ADDED_DAMAGE_WITH_BOW":a="활 피해 추가(+)";break;case"ADDED_DAMAGE_WITH_BLUNT":a="둔기 피해 추가(+)";break;case"ADDED_DAMAGE_WITH_SPEAR":a="창 피해 추가(+)";break;case"INCREASED_DAMAGE_WITH_AXE":a="도끼 피해 증가(%)";break;case"INCREASED_DAMAGE_WITH_SWORD":a="검 피해 증가(%)";break;case"INCREASED_DAMAGE_WITH_DAGGER":a="단검 피해 증가(%)";break;case"INCREASED_DAMAGE_WITH_BOW":a="활 피해 증가(%)";break;case"INCREASED_DAMAGE_WITH_BLUNT":a="둔기 피해 증가(%)";break;case"INCREASED_DAMAGE_WITH_SPEAR":a="창 피해 증가(%)"}return a},m=e=>{let a="#fff";switch(e){case"normal":a="#ece0e0";break;case"magic":a="#0082ff";break;case"rare":a="#fdd125";break;case"epic":a="#6000d2"}return a},x=e=>(0,i.ZP)(e);function p(e,a){let t=e.split(","),n=t[0].match(/:(.*?);/)[1],r=atob(t[1]),i=r.length,c=new Uint8Array(i);for(;i--;)c[i]=r.charCodeAt(i);return new File([c],a,{type:n})}}},function(e){e.O(0,[6384,9461,6990,8694,7908,7187,884,2971,8069,1744],function(){return e(e.s=84512)}),_N_E=e.O()}]);