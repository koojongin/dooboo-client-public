(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3260],{17363:function(e,r,t){Promise.resolve().then(t.bind(t,29016))},29016:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return p}});var s=t(57437),l=t(10243),d=t(2265),i=t(63411),a=t.n(i),n=t(605),c=t(40874),x=t(26874),o=t(21471);function p(){let[e,r]=(0,d.useState)([]),[t,i]=(0,d.useState)(),[a,c]=(0,d.useState)(0),[x,o]=(0,d.useState)(),p=async()=>{let{items:e,slots:t,isFulled:s}=await (0,n.iX)();r(e),c(t),o(s)},h=async()=>{i(await (0,n.aM)())},f=async()=>{p(),h()};return(0,d.useEffect)(()=>{f()},[]),(0,s.jsx)("div",{className:"rounded w-full min-h-[500px]",children:(0,s.jsxs)(l.Card,{className:"rounded border p-[8px]",children:[(0,s.jsx)(l.Card,{className:"rounded shadow-none",children:!!(null==t?void 0:t.character)&&(0,s.jsxs)("div",{children:[t.character.gold.toLocaleString()," Gold"]})}),(0,s.jsx)(u,{items:e,setItems:r,syncData:f,maxItemSlots:a,isFulledInventory:x})]})})}function u(e){let{items:r,setItems:t,syncData:l=async()=>{},maxItemSlots:d=0,isFulledInventory:i=!1}=e,p=async()=>{let e=r.filter(e=>e.isSelected),t=e.reduce((e,r)=>e+(0,o.r5)(r).gold,0),{isConfirmed:s}=await a().fire({title:"".concat(e.length,"개의 아이템을 판매하시겠습니까?"),text:"총 ".concat(t.toLocaleString(),"Gold"),icon:"question",confirmButtonText:"예",denyButtonText:"닫기",showDenyButton:!0});if(s){let r=e.map(e=>e._id).filter(e=>!!e);await (0,n.gE)(r),await l()}},u=e=>{let s=r.findIndex(r=>r._id===e._id);s<0||t(r.map((e,r)=>{if(s===r){let r={...e};return r.isSelected=!r.isSelected,r}return e}))},h=()=>{if(r.filter(e=>e.isSelected).length===r.length)return t(r.map(e=>(e.isSelected=!1,e)));t(r.map(e=>(e.isSelected=!0,e)))};return(0,s.jsxs)("div",{className:"",children:[(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsx)("div",{className:"border py-[2px] px-[5px] text-[16px] rounded text-white bg-green-400 cursor-pointer hover:bg-green-300",onClick:()=>h(),children:"전체 선택"}),(0,s.jsx)("div",{className:"border py-[2px]  px-[5px] text-[16px] rounded text-white bg-red-400 cursor-pointer",onClick:()=>p(),children:"선택된 아이템 판매"})]}),(0,s.jsxs)("div",{className:"flex gap-[10px]",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("div",{children:"인벤토리"}),(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsx)("input",{className:"border border-dark-blue rounded rounded-r-none focus-visible:outline-0 ff-wavve text-[16px] p-[2px]"}),(0,s.jsx)("div",{className:"border-dark-blue border border-l-0 rounded rounded-l-none ff-wavve text-[16px] flex items-center justify-center p-[2px]",children:"선택"})]})]}),(0,s.jsx)("div",{children:(0,s.jsx)("div",{children:(0,s.jsx)("div",{className:"flex flex-wrap max-w-[414px] bg-gray-100 p-[2px] rounded shadow-md gap-[1px]",children:Array(100).fill(1).map((e,t)=>{let l=r[t],i=t>=d;return(0,s.jsxs)("div",{className:"relative bg-white relative flex border-[1px] border-r rounded-md w-[40px] h-[40px] ".concat(i?"bg-gray-800":""),style:{borderColor:"".concat((null==l?void 0:l.isSelected)?"transparent":"")},children:[(null==l?void 0:l.isSelected)&&(0,s.jsx)("div",{className:"w-full h-full absolute left-0 top-0 bg-red-500"}),i&&(0,s.jsx)("div",{className:"absolute z-10 bg-gray-800 bg-opacity-60 w-[40px] h-[40px] rounded"}),l&&(0,s.jsx)(x.We,{className:"p-[2px]",item:l,onShowTotalDamage:!0,equippedCallback:()=>{},onSelect:u})]},(0,c.Z)())})})})})]}),(0,s.jsxs)("div",{className:"flex justify-center items-center flex-col gap-[1px]",children:[(0,s.jsx)("div",{className:"flex items-center justify-center px-[6px] bg-green-300 text-white rounded",children:"<"}),(0,s.jsx)("div",{className:"flex items-center justify-center px-[6px] bg-green-300 text-white rounded",children:">"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{children:"창고(는 개발중..)"}),(0,s.jsx)("div",{children:(0,s.jsx)("div",{children:(0,s.jsx)("div",{className:"flex flex-wrap max-w-[414px] bg-gray-100 p-[2px] rounded shadow-md gap-[1px]",children:Array(100).fill(1).map((e,r)=>{let t={isSelected:!1};return(0,s.jsxs)("div",{className:"relative bg-white flex border-[1px] border-r rounded-md w-[40px] h-[40px] ".concat("bg-gray-800"," ").concat((null==t?void 0:t.isSelected)?"border-red-300":""),children:[(0,s.jsx)("div",{className:"absolute z-10 bg-gray-800 bg-opacity-60 w-[40px] h-[40px] rounded"}),t&&(0,s.jsx)(x.We,{className:"p-[2px]",item:t,onShowTotalDamage:!0,equippedCallback:()=>{},onSelect:u})]},(0,c.Z)())})})})})]})]})]})}}},function(e){e.O(0,[6384,9461,6990,1866,8694,7908,7187,7391,6874,2971,8069,1744],function(){return e(e.s=17363)}),_N_E=e.O()}]);