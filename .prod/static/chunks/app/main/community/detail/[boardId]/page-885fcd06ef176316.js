(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5120],{92250:function(e,t,n){Promise.resolve().then(n.bind(n,56516))},47907:function(e,t,n){"use strict";var r=n(15313);n.o(r,"usePathname")&&n.d(t,{usePathname:function(){return r.usePathname}}),n.o(r,"useRouter")&&n.d(t,{useRouter:function(){return r.useRouter}}),n.o(r,"useSearchParams")&&n.d(t,{useSearchParams:function(){return r.useSearchParams}})},56516:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return f}});var r=n(57437),a=n(2265),c=n(63411),i=n.n(c),s=n(47907),o=n(605),l=n(21471),u=n(43951),d=n(38687),x=n(40874);function f(e){var t,n,c,f;let{params:p}=e,m=(0,s.useRouter)(),[b,h]=(0,a.useState)(),[w,y]=(0,a.useState)(""),[v,g]=(0,a.useState)(""),[A,D]=(0,a.useState)(-1),j=async()=>{h((await (0,o.yJ)(p.boardId)).board)},N=()=>{m.back()},_=async()=>{await i().fire({title:"미지원",text:"관리자에게 문의하세요",icon:"info",confirmButtonText:"확인"})},E=async()=>{b&&(await (0,o.rJ)(b._id,{content:w}),await Promise.all([i().fire({title:"댓글이 등록되었습니다",icon:"success",confirmButtonText:"확인"}),j()]),y(""))},k=async e=>{if(!b)return;let t=document.querySelector("textarea.comment-textarea")||{},n=null==t?void 0:t.value;if(!n)return i().fire({title:"내용을 입력하세요.",icon:"error",confirmButtonText:"확인"});await (0,o.rJ)(b._id,{content:n,parentCommentId:e}),await Promise.all([i().fire({title:"댓글이 등록되었습니다",icon:"success",confirmButtonText:"확인"}),j()])},I=async()=>{console.log(localStorage.getItem("token")),m.push("/main/community/edit/".concat(null==b?void 0:b._id))},S=async()=>{let{isConfirmed:e}=await i().fire({title:"정말로 삭제하시겠습니까?",text:"삭제 후엔 복구 할 수 없습니다.",confirmButtonText:"예",denyButtonText:"닫기",showDenyButton:!0});if(e){if(!b)return;await (0,o.mp)(b._id),m.back()}},C=()=>{m.push("/main/community/write")};return(0,a.useEffect)(()=>{j()},[]),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex mt-[10px] mb-[10px] gap-[1px]",children:[(0,r.jsx)("div",{onClick:()=>N(),className:"bg-ruliweb text-white py-[4px] px-[6px] font-bold text-[14px] cursor-pointer",children:"목록으로"}),(0,r.jsx)("div",{className:"bg-blue-300 text-white py-[4px] px-[6px] font-bold text-[14px] cursor-pointer",onClick:()=>C(),children:"글쓰기"}),(0,r.jsx)("div",{onClick:()=>I(),className:"bg-white border-ruliweb border text-ruliweb py-[4px] px-[6px] font-bold text-[14px] cursor-pointer",children:"수정"}),(0,r.jsx)("div",{onClick:()=>S(),className:"bg-white border-ruliweb border text-ruliweb py-[4px] px-[6px] font-bold text-[14px] cursor-pointer",children:"삭제"})]}),b&&(0,r.jsxs)("div",{className:"border border-gray-400",children:[(0,r.jsxs)("div",{className:"border-b border-b-gray-400 p-[10px] font-bold bg-gray-100",children:[b.title,"a"]}),(0,r.jsxs)("div",{className:"flex p-[10px] border-b border-b-gray-400 gap-[4px]",children:[(0,r.jsx)("div",{className:"w-[100px] h-[100px] border-b-gray-400 border p-[2px]",children:(0,r.jsx)("img",{src:(0,u.Z)(null===(t=b.character)||void 0===t?void 0:t.thumbnail)||d.LJ})}),(0,r.jsxs)("div",{className:"flex flex-col gap-[4px] justify-center",children:[(0,r.jsxs)("div",{className:"font-bold",children:["[Lv.",null===(n=b.character)||void 0===n?void 0:n.level,"]",null===(c=b.character)||void 0===c?void 0:c.nickname]}),(0,r.jsxs)("div",{className:"flex items-center gap-[4px] text-[12px]",children:[(0,r.jsxs)("div",{children:["조회 ",b.reads.toLocaleString()]}),(0,r.jsxs)("div",{children:["추천 ",b.recommends.toLocaleString()]})]}),(0,r.jsxs)("div",{className:"text-[12px]",children:["작성일 ",(0,l.KR)(new Date(b.createdAt))]})]})]}),(0,r.jsx)("div",{className:"p-[10px] text-[14px] ql-editor",dangerouslySetInnerHTML:{__html:b.content}}),(0,r.jsx)("div",{className:"w-full flex justify-center my-[30px]",children:(0,r.jsxs)("div",{className:"flex flex-col justify-center items-center border border-gray-500 rounded px-[20px] py-[10px] cursor-pointer",onClick:()=>_(),children:[(0,r.jsx)("div",{className:"text-[12px] text-red-300 font-bold",children:b.recommends}),(0,r.jsx)("i",{className:"far fa-thumbs-up text-ruliweb"})]})})]}),(0,r.jsx)("div",{className:"w-full border border-gray-400 my-[10px] text-[14px] ".concat((null==b?void 0:b.comments.length)===0?"invisible":""),children:null==b?void 0:null===(f=b.comments)||void 0===f?void 0:f.map((e,t)=>(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"w-full flex items-stretch border border-t-gray-400 border-dotted ".concat(0===t?"border-t-0":""),children:[(0,r.jsxs)("div",{className:"w-[200px] p-[8px] bg-gray-100 flex items-center gap-[4px]",children:[(0,r.jsx)("div",{className:"w-[40px] h-[40px]",children:(0,r.jsx)("img",{className:"w-full h-full",src:e.character.thumbnail||d.LJ})}),(0,r.jsxs)("div",{className:"font-bold flex gap-[2px] items-start flex-col",children:[(0,r.jsxs)("div",{className:"text-[11px] border rounded-[2px] px-[4px] py-[1px] bg-ruliweb text-white border-blue-900 ff-dodoom",children:["Lv.",e.character.level]}),(0,r.jsx)("div",{children:e.character.nickname})]})]}),(0,r.jsxs)("div",{className:"w-full flex justify-between items-stretch",children:[(0,r.jsxs)("div",{className:"w-full h-full p-[10px] text-[12px] focus-visible:outline-0 flex flex-col items-center",children:[(0,r.jsxs)("div",{className:"flex flex-wrap items-center w-full h-full",children:[(0,r.jsx)("div",{dangerouslySetInnerHTML:{__html:e.content}}),(0,r.jsx)("span",{className:"pl-[10px]",children:(0,r.jsxs)("span",{className:"text-ruliweb text-[12px] flex items-center gap-[2px] py-[4px] cursor-pointer",onClick:()=>{D(t)},children:[(0,r.jsx)("i",{className:"fa-solid fa-turn-up rotate-90"}),"답글"]})})]}),A===t&&(0,r.jsxs)("div",{className:"border border-gray-400 flex min-h-[80px] text-[12px] mt-[10px] w-full ".concat(A===t?"":"hidden"),children:[(0,r.jsx)("textarea",{className:"w-full focus-visible:outline-0 overflow-y-scroll comment-textarea",placeholder:"인터넷은 우리가 함께 만들어가는 소중한 공간입니다. 댓글 작성 시 타인에 대한 배려와 책임을 담아주세요."}),(0,r.jsx)("div",{className:"min-w-[100px] flex items-center justify-center bg-ruliweb text-white cursor-pointer",onClick:()=>k(e._id),children:"등록"})]})]}),(0,r.jsx)("div",{className:"text-[12px] flex items-center justify-center text-center bg-gray-100 min-w-[110px]",children:(0,l.KR)(e.createdAt)})]})]}),e.subComments.map(n=>(0,r.jsxs)("div",{className:"w-full flex items-stretch border border-t-gray-400 border-dotted",children:[(0,r.jsxs)("div",{className:"w-[200px] p-[8px] bg-gray-100 flex items-center gap-[4px]",children:[(0,r.jsx)("span",{className:"text-ruliweb text-[12px] flex items-center gap-[2px] py-[4px] cursor-pointer",onClick:()=>{D(t)},children:(0,r.jsx)("i",{className:"fa-solid fa-turn-up rotate-90 text-[20px]"})}),(0,r.jsx)("div",{className:"w-[40px] h-[40px]",children:(0,r.jsx)("img",{className:"w-full h-full",src:n.character.thumbnail||d.LJ})}),(0,r.jsxs)("div",{className:"font-bold flex gap-[2px] items-start flex-col",children:[(0,r.jsxs)("div",{className:"text-[11px] border rounded-[2px] px-[4px] py-[1px] bg-ruliweb text-white border-blue-900",children:["Lv.",n.character.level]}),(0,r.jsx)("div",{children:n.character.nickname})]})]}),(0,r.jsxs)("div",{className:"w-full flex justify-between items-stretch",children:[(0,r.jsxs)("div",{className:"w-full p-[10px] text-[13px] focus-visible:outline-0 flex flex-col items-start justify-center",children:[(0,r.jsx)("div",{className:"pl-[10px] font-bold text-[11px] text-[#999]",children:e.character.nickname}),(0,r.jsx)("div",{className:"flex flex-wrap items-center w-full pl-[10px]",children:(0,r.jsx)("div",{dangerouslySetInnerHTML:{__html:n.content}})})]}),(0,r.jsx)("div",{className:"text-[12px] flex items-center justify-center text-center bg-gray-100 min-w-[110px]",children:(0,l.KR)(e.createdAt)})]})]},(0,x.Z)()))]},(0,x.Z)()))}),(0,r.jsxs)("div",{className:"border border-gray-400 flex min-h-[80px] text-[12px] mt-[10px]",children:[(0,r.jsx)("textarea",{className:"w-full focus-visible:outline-0 overflow-y-scroll",placeholder:"인터넷은 우리가 함께 만들어가는 소중한 공간입니다. 댓글 작성 시 타인에 대한 배려와 책임을 담아주세요.",value:w,onChange:e=>y(e.target.value)}),(0,r.jsx)("div",{className:"min-w-[100px] flex items-center justify-center bg-ruliweb text-white cursor-pointer",onClick:()=>E(),children:"등록"})]}),(0,r.jsx)("div",{className:"flex gap-[4px] mt-[10px]",children:(0,r.jsx)("div",{onClick:()=>N(),className:"bg-ruliweb text-white py-[4px] px-[6px] font-bold text-[14px] cursor-pointer",children:"목록으로"})})]})}},38687:function(e,t,n){"use strict";n.d(t,{LJ:function(){return a},oE:function(){return r}});let r="https://dooboo.online:3001",a="/images/question_mark.webp"},605:function(e,t,n){"use strict";n.d(t,{ch:function(){return l},$b:function(){return I},PJ:function(){return D},mp:function(){return O},nw:function(){return S},in:function(){return w},AS:function(){return H},V3:function(){return R},Kd:function(){return Y},T7:function(){return v},Oz:function(){return y},wS:function(){return P},yJ:function(){return B},Gs:function(){return E},_t:function(){return _},YK:function(){return M},DJ:function(){return s},OY:function(){return m},sI:function(){return b},QN:function(){return h},ME:function(){return x},Bp:function(){return f},iX:function(){return N},VR:function(){return j},aM:function(){return o},fY:function(){return q},Tp:function(){return g},DG:function(){return L},rJ:function(){return J},E:function(){return p},AJ:function(){return u},hv:function(){return Z},je:function(){return A},O:function(){return W},RD:function(){return k},MC:function(){return d},gE:function(){return G},uw:function(){return T},ZR:function(){return C}});var r=n(7908),a=n(63411),c=n.n(a);let i=r.Z.create({baseURL:"https://dooboo.online:3001"});async function s(){let{data:e}=await i.get("/auth/jwt");return e}async function o(){let{data:e}=await i.get("/user/me");return e}async function l(e){let{data:t}=await i.get("/user/battle",{params:{name:e}});return t}async function u(e){let{data:t}=await i.post("/monster/create",e,{headers:{"Content-Type":"multipart/form-data"},transformRequest:[()=>e]});return t}async function d(e){let{data:t}=await i.put("/monster/update",e);return t}async function x(e){let{data:t}=await i.get("/monster/".concat(e));return t}async function f(){let{data:e}=await i.get("/monster/list");return e}async function p(e){let{data:t}=await i.post("/map/create",e);return t}async function m(e){let{data:t}=await i.get("/map/".concat(e));return t}async function b(){let{data:e}=await i.get("/map/list");return e}async function h(){let{data:e}=await i.get("/map/list-name");return e}async function w(e){let{data:t}=await i.delete("/map/delete",{data:{_id:e}});return t}async function y(){let{data:e}=await i.get("/item/base-weapon/list");return e}async function v(e){let{data:t}=await i.get("/item/base-weapon/".concat(e));return t}async function g(e){let{data:t}=await i.post("/item/base-weapon",e);return t}async function A(e){let{data:t}=await i.put("/item/base-weapon/".concat(e._id),e);return t}async function D(e){let{data:t}=await i.delete("/item/base-weapon/".concat(e));return t}async function j(){let{data:e}=await i.get("/character/rank");return e}async function N(){let{data:e}=await i.get("/character/inventory");return e}async function _(){let{data:e}=await i.get("/item/drop/list");return e}async function E(e){let{data:t}=await i.get("/item/drop/".concat(e));return t}async function k(e){let{data:t}=await i.put("/item/drop/".concat(e._id),e);return t}async function I(e){let{data:t}=await i.post("/item/drop",e);return t}async function S(e){let{data:t}=await i.delete("/item/drop/".concat(e));return t}async function C(e){let{data:t}=await i.post("/item/upload",{},{headers:{"Content-Type":"multipart/form-data"},transformRequest:[()=>e]});return t}async function R(e){let{data:t}=await i.post("/item/equip/".concat(e));return t}async function T(e){let{data:t}=await i.post("/item/unequip/".concat(e));return t}async function G(e){let{data:t}=await i.post("/item/sell",{itemIds:e});return t}async function M(e){let{data:t}=await i.get("/item/enhance-price/".concat(e));return t}async function H(e,t){let{data:n}=await i.post("/item/enhance/".concat(e),t);return n}async function L(e){let{data:t}=await i.post("/board/create",e);return t}async function W(e,t){let{data:n}=await i.put("/board/edit/".concat(e),t);return n}async function P(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{page:1},{data:n}=await i.post("/board/list",{condition:e,opts:t});return n}async function B(e){let{data:t}=await i.post("/board/".concat(e));return t}async function J(e,t){let{data:n}=await i.post("/board/comment/create/".concat(e),t);return n}async function O(e){let{data:t}=await i.delete("/board/delete/".concat(e));return t}async function q(e,t){let{data:n}=await i.post("/item/auction/add/".concat(e),t);return n}async function Y(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,{data:n}=await i.post("/item/auction/list",{condition:e,opts:t});return n}async function Z(e){let{data:t}=await i.post("/item/auction/purchase/".concat(e));return t}i.interceptors.request.use(e=>{let t=localStorage.getItem("token");return e.headers.Authorization=t,e},e=>Promise.reject(e)),i.interceptors.response.use(e=>e,async e=>{let{code:t,message:n,response:r}=e,{status:a,data:i}=r||{};return await c().fire({title:t,text:(null==i?void 0:i.message)||n,icon:"error",confirmButtonText:"확인"}),Promise.reject(e)})},43951:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(38687);function a(e){return!e||e.includes(r.oE)?e:"".concat(r.oE,"/").concat(e)}},40874:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(41231);function a(){return(0,r.Z)()}},21471:function(e,t,n){"use strict";n.d(t,{Ap:function(){return u},F6:function(){return o},Iu:function(){return x},KR:function(){return s},W:function(){return l},dW:function(){return p},oK:function(){return f},qo:function(){return i},r5:function(){return d},v9:function(){return m}});var r=n(42151),a=n.n(r);n(30971);var c=n(84555);let i=e=>{let[t,n]=e;return"".concat(t," ~ ").concat(n)},s=e=>a()(e).format("YYYY-MM-DD HH:mm:ss"),o=e=>a()(e).fromNow(),l=e=>a()(e).format("MM/DD HH:mm:ss"),u=e=>a()(e).format("HH:mm"),d=e=>{if("weapon"===e.iType)return e.weapon;throw Error("Unknown Item Type")},x=e=>{let t=e;switch(e){case"axe":t="도끼";break;case"sword":t="검";break;case"dagger":t="단검";break;case"bow":t="활";break;case"blunt":t="둔기";break;case"spear":t="창";break;case"normal":t="일반";break;case"magic":t="마법";break;case"rare":t="희귀";break;case"epic":t="서사";break;case"INCREASED_DAMAGE":t="피해 증가(%)";break;case"INCREASED_PHYSICAL_DAMAGE":t="물리 피해 증가(%)";break;case"INCREASED_COLD_DAMAGE":t="냉기 피해 증가(%)";break;case"INCREASED_FIRE_DAMAGE":t="화염 피해 증가(%)";break;case"INCREASED_LIGHTNING_DAMAGE":t="번개 피해 증가(%)";break;case"ADDED_PHYSICAL_DAMAGE":t="물리 피해 추가(+)";break;case"ADDED_COLD_DAMAGE":t="냉기 피해 추가(+)";break;case"ADDED_FIRE_DAMAGE":t="화염 피해 추가(+)";break;case"ADDED_LIGHTNING_DAMAGE":t="번개 피해 추가(+)";break;case"ADDED_DAMAGE_WITH_AXE":t="도끼 피해 추가(+)";break;case"ADDED_DAMAGE_WITH_SWORD":t="검 피해 추가(+)";break;case"ADDED_DAMAGE_WITH_DAGGER":t="단검 피해 추가(+)";break;case"ADDED_DAMAGE_WITH_BOW":t="활 피해 추가(+)";break;case"ADDED_DAMAGE_WITH_BLUNT":t="둔기 피해 추가(+)";break;case"ADDED_DAMAGE_WITH_SPEAR":t="창 피해 추가(+)";break;case"INCREASED_DAMAGE_WITH_AXE":t="도끼 피해 증가(%)";break;case"INCREASED_DAMAGE_WITH_SWORD":t="검 피해 증가(%)";break;case"INCREASED_DAMAGE_WITH_DAGGER":t="단검 피해 증가(%)";break;case"INCREASED_DAMAGE_WITH_BOW":t="활 피해 증가(%)";break;case"INCREASED_DAMAGE_WITH_BLUNT":t="둔기 피해 증가(%)";break;case"INCREASED_DAMAGE_WITH_SPEAR":t="창 피해 증가(%)"}return t},f=e=>{let t="#fff";switch(e){case"normal":t="#ece0e0";break;case"magic":t="#0082ff";break;case"rare":t="#fdd125";break;case"epic":t="#6000d2"}return t},p=e=>(0,c.ZP)(e);function m(e,t){let n=e.split(","),r=n[0].match(/:(.*?);/)[1],a=atob(n[1]),c=a.length,i=new Uint8Array(c);for(;c--;)i[c]=a.charCodeAt(c);return new File([i],t,{type:r})}}},function(e){e.O(0,[9461,6990,7908,7187,2971,8069,1744],function(){return e(e.s=92250)}),_N_E=e.O()}]);