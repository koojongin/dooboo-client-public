(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6277],{45840:function(e,a,n){Promise.resolve().then(n.bind(n,25911)),Promise.resolve().then(n.bind(n,89437)),Promise.resolve().then(n.bind(n,43938))},25911:function(e,a,n){"use strict";n.r(a),n.d(a,{default:function(){return c}});var i=n(57437),l=n(10243),r=n(19524),t=n.n(r),o=n(2265),s=n(40874);function c(){var e;let[a,n]=(0,o.useState)([]),[r,c]=(0,o.useState)(30),[,m]=(0,o.useState)(),[p,d]=(0,o.useState)(!1),f=(0,o.useRef)(),u=()=>{d(!p)},h=()=>{var e;null===(e=f.current)||void 0===e||e.play(),f.current&&(f.current.onended=()=>{C(!0)}),m(void 0),setTimeout(()=>{m(f.current),f.current&&(f.current.volume=r/100)},1)},x=()=>{var e;null===(e=f.current)||void 0===e||e.pause(),m(void 0),setTimeout(()=>{m(f.current)},1)},g=()=>{f.current&&(f.current.currentTime=f.current.duration-1)},v=e=>{let[a]=t().shuffle(e);return"/bgm/".concat(a)},w=(e,a)=>{var n;let i=f.current&&!f.current.paused;null===(n=f.current)||void 0===n||n.pause(),f.current=new Audio(e),f.current.volume=r/100,m(f.current),(i||a)&&h()},C=e=>{w(v(a),e)};return(0,o.useEffect)(()=>{if(!(a.length>0))return n(["01 Tales are about to be weaved (Title+Login BGM).mp3.flac","01 This Tales (Japanese Server Special ver.) (Opening).mp3.flac","01 Till the End of Infinity (3D Movie Opening).mp3.flac","01 We wish your merry Christmas (TW ver.) (Christmas Limit Login).mp3.flac","01. Second Run.flac","02 Have yourself a Merry Christmas ~ White LEAF (Christmas Event).mp3.flac","02 Make U THE Weaver (Character Selection).mp3.flac","02 Past (Event).mp3.flac","02 The Takes (ESTi's Fairytale remix)(Login+Temple remix).mp3.flac","02. attack ～ Final Killer ～ Red Eyes ～ attack.flac","03 Blue Coral (Coral Cave).mp3.flac","03 Close to the Weaver (Kriden Plains,Penine Forest,).mp3.flac","03 Feliz Navidad (Christmas Event).mp3.flac","03 Magical Autumn ~ Mahou no Aki (Clad (Night)).mp3.flac","03. 四千年 ～ 夜明け.flac","04 Fight Master (Fight Club).mp3.flac","04 First Run (Kriden Plains).mp3.flac","04 is this 2step (Doppleganger Forest).mp3.flac","04 Where santa goes (Christmas Dungeon).mp3.flac","04. money money money ～ 鳥たちのワルツ.flac","05 jungle jungle (Kauru (Midday)).mp3.flac","05 MOTIVITY (Narvik (Midday)).mp3.flac","05 Second Run (Kriden Plains).mp3.flac","05 White fantasia (Eltibo (Midday)) .mp3.flac","05. Reminiscence.flac","06 Brand new spring is coming (Weapon, Tool Store).mp3.flac","06 Deadly Mansion (Event).mp3.flac","06 Ice candy tree (White Forest (Midday)) .mp3.flac","06 Tomb of Honor (Tomb of the Hero).mp3.flac","06. Tales are about to be weaved ～ And, Don't Forget ～ Carnival town ～ LAPUTA.flac","07 it's not over yet (Event) .mp3.flac","07 Joke (Event).mp3.flac","07 March of the Hero (Accipiter).mp3.flac","07 Nymph's allurement (White Forest (Night)).mp3.flac","07. Battle in the Tomb of Hero ~ Tomb of Honor.flac","08 autumn leaves (Clad (Midday)).mp3.flac","08 money money money (Bank).mp3.flac","08 Sweet Place (Inn, Hospital, Temple etc.).mp3.flac","08 Wild spirit (Land in the Depth of Winter (Midday)).mp3.flac","08. Apparition.flac","09 big tick (Cave of Chaos).mp3.flac","09 dark (Cave of Chaos).mp3.flac","09 Nocturn for Eltibo (Eltibo (Night)).mp3.flac","09 Waltz of the Birds (Magic Store, General Store).mp3.flac","09. dawn ～ Good Evening, Narvik.flac","10 attack (Boss Battle, Event).mp3.flac","10 Four Thousand Years (Kriden Plains, Celbus Plains (Night)).mp3.flac","10 just climbing (Penine Forest, , Kriden Plains).mp3.flac","10 The depth of winter (Land in the Depth of Winter (Night)).mp3.flac","10. Beyond.flac","11 Apparition (Tomb of the Hero).mp3.flac","11 Dance ~ Celtic Edit (Ordinary Bar-room).mp3.flac","11 LAPUTA (Event).mp3.flac","11 my love (Event).mp3.flac","11. Your Smile.flac","12 Carnival town (Blue Coral Town (Midday)).mp3.flac","12 Good Evening, Narvik (Narvik (NIght)).mp3.flac","12 Night Breeze (Ryuusen Countryside (Night)).mp3.flac","12 The Place Forbidden to Visit by Adults (Whispering Coast, Valencia Coast, Doppleganger Forest etc.).mp3.flac","12. 紅唇.flac","13 Bambooming (Bamboo Ravine (Midday)).mp3.flac","13 Make a break to this! (Fight Club, Doppleganger Forest).mp3.flac","13 Sleepless air (Blue Coral Town (Night)).mp3.flac","13 Sweet Jungle (Kauru (NIght)).mp3.flac","13. Come Rain or Come Shine.flac","14 A World of Cloudy Skies (Whispering Coast, Valencia Coast, Kriden Plains, Celbus Plains).mp3.flac","14 Daybreak (Kriden Plains, Penine Forest, Celbus Plains).mp3.flac","14 Dive (Crystal Cave).mp3.flac","14 Rolling Dice (Event) .mp3.flac","15 Joshua's Mandolin (Event) .mp3.flac","15 Red Eyes (Ruby Cave) .mp3.flac","15 Rocking on a Heaven's Door (Event).mp3.flac","15 Take a step forward (Kriden Plains, Penine Forest).mp3.flac","16 Aqua pura (Erla Island (Midday)) .mp3.flac","16 Celtician (Magnolia Wine Show Event[Event) .mp3.flac","16 Fortune Message (Whispering Coast, Valencia Coast).mp3.flac","16 MidNight (Portal Area).mp3.flac","17 Beach Wandering Boy (Whispering Coast, Valencia Coast).mp3.flac","17 Sea star (Erla Island (Night)) .mp3.flac","17 Sentence (Event).mp3.flac","17 Song of Beach (Valencia Plains, Whispering Coast).mp3.flac","18 Come with happiness (Raidia (Midday)).mp3.flac","18 Serious Conspiracy (Event).mp3.flac","18 So Cool (Event).mp3.flac","18 The times forgotten (Erlarium Dungeon).mp3.flac","19 Arab Dealer (Cardiff (Night)).mp3.flac","19 Life in Keltica (keltica (Midday)).mp3.flac","19 Surprise Rush (Event).mp3.flac","19 Walking on your own (Kriden Plains, Celbus Plains ).mp3.flac","20 Black Snake (Desert Field).mp3.flac","20 Dawn, and the Moment of Awakening (Cave of Chaos).mp3.flac","20 Good Morning Tian (Portal Area).mp3.flac","20 Your mejesty (Anomarad Royal Castle Interior) .mp3.flac","21 Apparition Re-Mix (Tomb of the Hero).mp3.flac","21 chroyama (Glinz Mine) .mp3.flac","21 real world (Kriden Plains,Celbus Plains, Penine Forest,).mp3.flac","21 The occult (Anomarad Royal Castle Laboratory).mp3.flac","22 A Tiny Chest Which Cannot Be Opened (Event).mp3.flac","22 Final Killer (Event).mp3.flac","22 La redoute (Fontina House) .mp3.flac","22 The Good Old Days (Event).mp3.flac","23 groovin' tonight (arrange ver.) (Kriden Plains).mp3.flac","23 Noblesse (Keltica Town Noble Neighborhood (Midday)).mp3.flac","23 Park's Life (Paku's ver.) (Event - Houhige Team) .mp3.flac","23 yeah! (Cave of Chaos).mp3.flac","24 A Song that Invites Happiness (Raidia (Night)).mp3.flac","24 Aquabelle (Portal Area).mp3.flac","24 Dance of feathers (Keltica Town Noble Neighborhood (Night)).mp3.flac","24 East Green wind (Ryuusen Countryside (Midday)).mp3.flac","25 magnolia (Magnolia Wine) .mp3.flac","25 One Day (Keltica Town Citizen's Neighborhood (Midday)).mp3.flac","25 Shadow Claws (Bamboo Ravine (Night)).mp3.flac","25 Steppers on line (Penine Forest, Kriden Plains, Celbus Plains).mp3.flac","26 And,Don't Forget (Keltica Town Citizen's Neighborhood (Night)).mp3.flac","26 F.M.7 (Kriden Plains, Celbus Plains).mp3.flac","26 keep yourself (Underwater Cave).mp3.flac","26 Tower (Tower of Requiem).mp3.flac","27 dawn (Cave of Spring).mp3.flac","27 Lucky Guy (Panozare Coast (Midday)).mp3.flac","27 Philaion (Philaion Dungeon) .mp3.flac","27 Tropical Tripper (Portal Area).mp3.flac","28 Cursed Mansion (Event) .mp3.flac","28 Dark Knight (Panozare Coast(Night)) .mp3.flac","28 delight (Valencia Plains, Whispering Coast).mp3.flac","28 Urban lazy groove goes on (Celbus Plains).mp3.flac","29 Chonan Gang (Doppleganger Forest).mp3.flac","29 City of Trade (Cardiff (Midday)).mp3.flac","29 Get Over (Keltica Outskirts Forest (Midday)).mp3.flac","29 Orange Garage (Cave of Chaos).mp3.flac","30 Hotel Inside (Adosel).mp3.flac","30 In Grief (Event) .mp3.flac","30 in peace (Event).mp3.flac","30 Reminiscence (Keltica Outskirts Forest (Night)).mp3.flac","31 Beyond (English ver.) (Ending Movie).mp3.flac","31 dis-apparition (Shinop Dungeon).mp3.flac","31 Doorway to an Ancient Civilization (Gold Sand Dungeon).mp3.flac","31 indelight (Event).mp3.flac","32 Battle in the Tomb of Hero - Z80 mix - (Tomb of the Hero).mp3.flac","32 Flag Tournament (Flag Get).mp3.flac","32 Success! (Chapter Clear!).mp3.flac","33 Not Ended Fantasy (real-GT ver.) (Staff Roll).mp3.flac","33 Stage Clear (Stage Clear!).mp3.flac","33 What Exists In Order to Forget the Dreams of Yesterday (Event) .mp3.flac","34 Apparition (Orchestra ver.) (3D Movie Opening).mp3.flac","34 Weaver Once Again (Death (Swoon).mp3.flac","35 Into the Divine (Ending Movie).mp3.flac","Third Run.mp3"]),()=>{}},[]),(0,o.useEffect)(()=>{0!==a.length&&C()},[a]),(0,o.useEffect)(()=>()=>{var e;null===(e=f.current)||void 0===e||e.pause()},[f]),(0,o.useEffect)(()=>{f.current&&(f.current.volume=r/100)},[r]),(0,i.jsx)("div",{className:"bg-white bg-opacity-90 w-full wide:px-[20px]",children:(0,i.jsxs)("div",{className:"py-[4px] flex items-center min-h-[40px]",children:[(0,i.jsxs)("div",{className:"flex gap-[2px] mt-[1px] items-center",children:[f.current&&f.current.paused&&(0,i.jsx)("img",{className:"w-[20px] cursor-pointer",src:"/images/audio/icon_audio_play.png",onClick:()=>h()}),f.current&&!f.current.paused&&(0,i.jsx)("img",{className:"w-[20px] cursor-pointer",src:"/images/audio/icon_audio_pause.png",onClick:()=>x()}),f.current&&(0,i.jsx)("img",{className:"w-[20px] cursor-pointer",src:"/images/audio/icon_audio_random.png",onClick:()=>C()}),(0,i.jsxs)(l.Popover,{handler:d,open:p,children:[(0,i.jsx)(l.PopoverHandler,{children:(0,i.jsx)("img",{className:"w-[20px] cursor-pointer",src:"/images/audio/icon_audio_list.png",onClick:()=>u()})}),(0,i.jsx)(l.PopoverContent,{className:"rounded p-[8px] p-[10px] max-h-[200px] overflow-y-scroll",children:(0,i.jsx)("div",{className:"flex flex-col gap-[2px]",children:a.map((e,a)=>(0,i.jsxs)("div",{onClick:()=>w("/bgm/".concat(e),!0),className:"hover:bg-gray-400 hover:text-white cursor-pointer p-[4px]",children:["[","".concat(a+1).padStart(3,"0"),"]"," ",e.replace(".mp3","").replace(".flac","")]},(0,s.Z)()))})})]}),(0,i.jsx)("div",{className:"flex w-[100px] max-w-[100px] flex-col gap-8",children:(0,i.jsx)(l.Slider,{className:"min-w-[100px]",size:"sm",value:r,onChange:e=>{e.target.value&&c(parseFloat(e.target.value))}})})]}),(0,i.jsx)("div",{className:"ml-[10px] ff-score text-[16px] text-[#464646] font-bold",children:f&&decodeURIComponent((null===(e=f.current)||void 0===e?void 0:e.src)||"").replace("http://dooboo.online:3002/bgm/","").replace("http://dooboo.online:3003/bgm/","").replace(".flac","").replace(".mp3","")}),(0,i.jsx)("div",{className:"cursor-pointer bg-green-300 text-white",onClick:()=>g(),children:"test"})]})})}},89437:function(e,a,n){"use strict";n.r(a),n.d(a,{ChatComponent:function(){return u}});var i=n(57437),l=n(10243),r=n(2265),t=n(47907),o=n(54548),s=n(605),c=n(21350),m=n(40874),p=n(21471),d=n(43951),f=n(26874);function u(){let e=(0,t.usePathname)(),a=(0,r.useRef)(null),[n,u]=(0,r.useState)(""),[h,x]=(0,r.useState)([]),[g,v]=(0,r.useState)({}),[w,C]=(0,r.useState)(!1),b={onMouseEnter:()=>C(!0),onMouseLeave:()=>C(!1)},[y,N]=(0,r.useState)(!1),j=e=>{"Enter"===e.key&&n&&(o.W.emit(c.iy,{message:n}),u(""))},E=e=>{u(e)},k=e=>{b.onMouseLeave(),o.W.emit(c.SY,{src:e})},T=e=>e.damageOfPhysical+e.damageOfLightning+e.damageOfCold+e.damageOfFire,S=async()=>{let{token:e}=await (0,s.DJ)();o.W.io.opts.extraHeaders.Authorization="Bearer ".concat(e),o.W.connect(),o.W.on("connect",()=>{console.log("connected"),o.W.emit(c.__)}),o.W.on(c.Wj,(e,a)=>{switch(e){case c.$L:x(e=>[...e,a]);break;case c.JJ:x(e=>[...e,a]);break;case c.RS:let{connectedCharacters:n}=a||{};v({...n});break;case c.Vl:x(e=>[...e,a]);break;case c.Ko:x(e=>[...e,a])}})};return(0,r.useEffect)(()=>{(null==a?void 0:a.current)&&(null==a||a.current.scrollTo(0,99999999999))},[h]),(0,r.useEffect)(()=>(S(),()=>{null===o.W||void 0===o.W||o.W.removeAllListeners(),null===o.W||void 0===o.W||o.W.disconnect()}),[]),(0,r.useEffect)(()=>{},[e]),(0,i.jsxs)("div",{className:"w-full ".concat(e.indexOf("main/community")>=0||y?"fixed bottom-[40px] left-0":"wide:w-[300px]"),children:[(0,i.jsx)("div",{className:"ff-wavve cursor-pointer border bg-ruliweb text-white p-[2px] rounded z-50",style:{display:y?"flex":"none"},onClick:()=>{N(!y)},children:"채팅창 펼치기"}),(0,i.jsx)("div",{style:{display:y?"none":"flex"},className:"w-full ".concat(e.indexOf("main/community")>=0?"fixed bottom-[30px] left-0":"wide:w-[300px]"),children:(0,i.jsx)("div",{className:"w-full ".concat(y&&0>e.indexOf("main/community")?"min-w-[50px]":"min-w-[200px]"),children:(0,i.jsxs)(l.Card,{className:"".concat(y?"h-[50px]":""," ").concat(y&&0>e.indexOf("main/community")?"w-[50px]":""," rounded p-[10px] resize overflow-auto ").concat(e.indexOf("main/community")>=0?"max-h-[initial]":"max-h-[500px]"),children:[(0,i.jsxs)("div",{className:"flex gap-[2px] items-center ".concat(y&&0>e.indexOf("main/community")?"flex-col":""),children:[(0,i.jsx)("div",{className:"ff-wavve cursor-pointer border bg-ruliweb text-white p-[2px] rounded",onClick:()=>{N(!y)},children:"접기"}),(0,i.jsxs)("div",{children:["현재 접속자 ",Object.keys(g).length,"명"]})]}),(0,i.jsxs)("div",{className:"flex justify-between text-[14px] ".concat(e.indexOf("main/community")>=0?"wide:flex-row h-[220px]":"wide:h-full wide:flex-col max-h-[200px] min-h-[150px] wide:max-h-full"),children:[(0,i.jsx)("div",{className:"min-w-[200px] overflow-y-scroll border border-r-0 ".concat(e.indexOf("main/community")>=0?"":"wide:min-h-[80px] wide:min-w-full wide:max-h-[80px] wide:text-start"," "),children:Object.entries(g).map(e=>{let[a,n]=e,{nickname:l}=n;return(0,i.jsx)("div",{children:l},(0,m.Z)())})}),(0,i.jsx)("div",{className:"overflow-y-scroll w-full text-[14px] ".concat(e.indexOf("main/community")>=0?"h-full":"wide:h-full"," wide:max-h-[inherit] flex flex-col gap-[4px] wide:border-l"),ref:a,children:h.map(e=>{let a="";return e.isSystem&&(a=c.C7.SYSTEM),!e.isSystem&&(a=c.C7.NORMAL,e.item&&(a=c.C7.ITEM_SHARE)),e.type&&(a=e.type),(0,i.jsxs)("div",{className:"flex flex-wrap",children:[a===c.C7.ITEM_SHARE&&(0,i.jsxs)("div",{className:"break-all pl-[5px] w-full border-t border-dashed border-b border-amber-800 cursor-pointer",children:["[".concat((0,p.Ap)(new Date(e.timestamp)),"] "),"".concat(e.nickname,": "),(0,i.jsx)(l.Tooltip,{className:"rounded-none bg-transparent",interactive:!0,content:(0,i.jsx)(f.VQ,{item:e.item}),children:(0,i.jsxs)("div",{className:"flex items-center gap-[2px]",children:[(0,i.jsxs)("div",{className:"relative",style:{borderColor:(0,p.oK)(e.item.weapon.iGrade),borderWidth:"1px",borderRadius:"2px"},children:[(0,i.jsx)("div",{className:"absolute z-10 text-[12px] border rounded px-[2px] bg-[#424242a6] text-white ff-ba ff-skew",children:T(e.item.weapon)}),(0,i.jsx)("img",{src:(0,d.Z)(e.item.weapon.thumbnail),className:"w-[40px] h-[40px] border rounded p-[1px] bg-white"})]}),"[",e.item.weapon.name,e.item.weapon.starForce>0?"+".concat(e.item.weapon.starForce):"","]"]})})]}),a===c.C7.NORMAL&&(0,i.jsxs)("div",{className:"break-all pl-[5px]",children:["[".concat((0,p.Ap)(new Date(e.timestamp)),"] "),e.nickname,": ",e.message]}),a===c.C7.EMOJI&&(0,i.jsxs)("div",{className:"break-all pl-[5px] flex flex-col wide:w-full",children:[(0,i.jsxs)("div",{children:["[".concat((0,p.Ap)(new Date(e.timestamp)),"] ")," ",e.nickname,":"," "]}),(0,i.jsx)("div",{className:"",children:(0,i.jsx)("div",{className:"w-[80px] h-[80px]",children:(0,i.jsx)("img",{src:e.emoji})})})]}),a===c.C7.SYSTEM&&(0,i.jsxs)("div",{className:"break-all pl-[5px]",children:["[".concat((0,p.Ap)(new Date(e.timestamp)),"] "),e.message]})]},(0,m.Z)())})})]}),(0,i.jsxs)("div",{className:"flex items-stretch",children:[(0,i.jsxs)(l.Popover,{handler:C,open:w,children:[(0,i.jsx)(l.PopoverHandler,{children:(0,i.jsx)("div",{className:"w-[32px] h-[32px] border border-r-0 flex items-center justify-center cursor-pointer",children:(0,i.jsx)("img",{src:"/images/emoji/icon_emoji_select.png"})})}),(0,i.jsx)(l.PopoverContent,{className:"rounded p-0 m-0 p-[10px]",children:(0,i.jsxs)("div",{className:"flex flex-wrap gap-[1px] w-[604px] overflow-y-scroll max-h-[300px]",children:[Array(21).fill(1).map((e,a)=>{let n="/images/emoji/ClanChat_Emoji_".concat("".concat(a+1).padStart(2,"0"),"_Kr.png");return(0,i.jsx)("img",{src:n,onClick:()=>k(n),className:"w-[80px] h-[80px] cursor-pointer"},(0,m.Z)())}),Array(12).fill(1).map((e,a)=>{let n="/images/emoji/pepe_".concat("".concat(a+1).padStart(3,"0"),".png");return(0,i.jsx)("img",{src:n,onClick:()=>k(n),className:"w-[80px] h-[80px] cursor-pointer"},(0,m.Z)())})]})})]}),(0,i.jsx)("input",{className:"border p-[4px] w-full text-[14px]",placeholder:"채팅 내용을 입력하세요. 입력 후 엔터",value:n,onChange:e=>{E(e.target.value)},onKeyDown:e=>j(e)})]})]})})})]})}},43938:function(e,a,n){"use strict";n.r(a),n.d(a,{default:function(){return t}});var i=n(57437),l=n(8792),r=n(47907);function t(){(0,r.useRouter)();let e=()=>{localStorage.removeItem("token"),window.location.href="/"};return(0,i.jsxs)("div",{className:"flex items-center justify-start w-full mb-2 gap-1 z-10 [&>*>img]:h-[80px] [&>a]:flex",children:[(0,i.jsx)(l.default,{href:"/main",className:" duration-300 cursor-pointer",children:(0,i.jsx)("img",{src:"/images/icon_001_battle.png"})}),(0,i.jsx)(l.default,{href:"/main/skill",className:" duration-300 cursor-pointer",children:(0,i.jsx)("img",{src:"/images/icon_002_skill.png"})}),(0,i.jsx)(l.default,{href:"/main/inn/stash",className:" duration-300 cursor-pointer",children:(0,i.jsx)("img",{src:"/images/icon_007_inn.png"})}),(0,i.jsx)(l.default,{href:"/main/community",className:"  duration-300 cursor-pointer",children:(0,i.jsx)("img",{src:"/images/icon_005_community.png"})}),(0,i.jsx)(l.default,{href:"/main/rank",className:"  duration-300 cursor-pointer",children:(0,i.jsx)("img",{src:"/images/icon_006_rank.png"})}),(0,i.jsx)(l.default,{href:"/main/collection/maps",className:"  duration-300 cursor-pointer",children:(0,i.jsx)("img",{src:"/images/icon_008_collection.png"})}),(0,i.jsx)("button",{className:"ml-auto w-20 max-h-20 bg-white shadow-md hover:drop-shadow-lg rounded-full h-full duration-300",onClick:()=>e(),children:"로그아웃"})]})}}},function(e){e.O(0,[6384,9461,6990,1866,8694,7908,7187,7391,8792,6874,2971,8069,1744],function(){return e(e.s=45840)}),_N_E=e.O()}]);